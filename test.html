<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      .AB {
        background: #e6efff;
        opacity: 0.5;
        position: absolute;
        width: 100px;
        height: 100px;
      }
      table {
        border-collapse: collapse;
      }
      tr,
      th,
      td {
        border: 1px solid black;

        user-select: none;
      }
    </style>
  </head>

  <body>
    <table style="width: 50%;">
      <thead>
        <tr>
          <th>a</th>
          <th>b</th>
          <th>c</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="test">1</td>
          <td>2</td>
          <td>3</td>
        </tr>
        <tr>
          <td>aa</td>
          <td>as</td>
          <td>aw</td>
        </tr>
        <tr>
          <td>bg</td>
          <td>bb</td>
          <td>be</td>
        </tr>
      </tbody>
    </table>

    <script type="text/javascript">
      let testTH = document.getElementById("test");
      let coordinate = testTH.getBoundingClientRect();
      console.log(
        testTH.getBoundingClientRect(),
        testTH.getBoundingClientRect().left +
          testTH.getBoundingClientRect().width +
          "px"
      );
      testTH.addEventListener("mousedown", function () {
        startDrag();
      });

      function startDrag() {
        let divA = document.createElement("div");
        divA.id = "A";
        divA.classList.add("AB");
        divA.style.position = "absolute";
        divA.style.left = coordinate.left + coordinate.width + "px";
        divA.style.width =
          testTH.parentNode.getBoundingClientRect().width -
          coordinate.width +
          "px";
        divA.style.top = coordinate.top + "px";
        divA.style.height = coordinate.height + "px";
        document.getElementsByTagName("body")[0].appendChild(divA);

        document.onmouseup = finishDrag;
        document.onmousemove = function (e) {
          divA.style.top = divA.offsetTop + e.movementY + "px";
        };
      }

      function finishDrag() {
        let thisEl = document.getElementById("A");
        thisEl.parentNode.removeChild(thisEl);
        document.onmouseup = null;
        document.onmousemove = null;
      }
    </script>
  </body>
</html>
